exec=mpiexec -n 12 python
pre_allu:
	mkdir -p logs/tests/allu/
pre_runs:
	mkdir -p logs/runs/

tests_allu: pre_allu
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u none --stabilisation-type-t none --k 2 --nref 1 |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_1_newton_stabu_none_stabT_none.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u burman --stabilisation-type-t none --k 2 --nref 1 |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_1_newton_stabu_burman_stabT_none.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u burman --stabilisation-type-t supg --k 2 --nref 1 |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_1_newton_stabu_burman_stabT_supg.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u burman --stabilisation-type-t burman --k 2 --nref 1 |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_1_newton_stabu_burman_stabT_burman.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u none --stabilisation-type-t none --k 2 --nref 1 --unstructured |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_1_unstructured_newton_stabu_none_stabT_none.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u burman --stabilisation-type-t none --k 2 --nref 1 --unstructured |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_1_unstructured_newton_stabu_burman_stabT_none.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u burman --stabilisation-type-t supg --k 2 --nref 1 --unstructured |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_1_unstructured_newton_stabu_burman_stabT_supg.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u burman --stabilisation-type-t burman --k 2 --nref 1 --unstructured |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_1_unstructured_newton_stabu_burman_stabT_burman.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u none --stabilisation-type-t none --k 2 --nref 2 |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_2_newton_stabu_none_stabT_none.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u burman --stabilisation-type-t none --k 2 --nref 2 |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_2_newton_stabu_burman_stabT_none.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u burman --stabilisation-type-t supg --k 2 --nref 2 |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_2_newton_stabu_burman_stabT_supg.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u burman --stabilisation-type-t burman --k 2 --nref 2 |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_2_newton_stabu_burman_stabT_burman.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u none --stabilisation-type-t none --k 2 --nref 2 --unstructured |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_2_unstructured_newton_stabu_none_stabT_none.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u burman --stabilisation-type-t none --k 2 --nref 2 --unstructured |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_2_unstructured_newton_stabu_burman_stabT_none.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u burman --stabilisation-type-t supg --k 2 --nref 2 --unstructured |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_2_unstructured_newton_stabu_burman_stabT_supg.log
	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --baseN 10 --gamma 1e4 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type allu --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u burman --stabilisation-type-t burman --k 2 --nref 2 --unstructured |& tee logs/tests/allu/testOB_allu_Gr_gamma_1e4_k_2_nref_2_unstructured_newton_stabu_burman_stabT_burman.log
#First test: k=2, nref=1,2, stab_u=none,burman, stab_t=none,supg,burman mesh=structured,unstructured
#Second test: visc, visccond, k=3

#	$(exec) ob_cavity2d.py --discretisation sv --mh bary --patch macro --restriction --baseN 10 --gamma 10000 --linearisation newton --temp-bcs left-right --stabilisation-weight-u 5e-3 --solver-type almg --thermal-conv natural_Gr --fields Tup --temp-dependent none --stabilisation-type-u burman --stabilisation-type-t burman --k 2 --nref 2 --cycles 2 --smoothing 4
